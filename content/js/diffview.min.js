diffview={buildView:function(e){var t=e.baseTextLines,n=e.newTextLines,a=e.opcodes,d=e.baseTextName?e.baseTextName:"Base Text",l=e.newTextName?e.newTextName:"New Text",i=e.contextSize,c=0==e.viewType||1==e.viewType?e.viewType:0,r=0,p=0,h=0,o=document.getElementById("insertCount"),s=document.getElementById("deletedCount"),u=document.getElementById("changedCount");if(null==t)throw"Cannot build diff view; baseTextLines is not defined.";if(null==n)throw"Cannot build diff view; newTextLines is not defined.";if(!a)throw"Canno build diff view; opcodes is not defined.";function m(e,t){var n=document.createElement(e);return n.className=t,n}function f(e,t){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),n}function g(e,t,n,a){a=a||"";var d=document.createElement(e);return d.className=t,d.dataset.text=a,d.appendChild(document.createTextNode(n)),d}var C=document.createElement("thead"),w=document.createElement("tr");C.appendChild(w),c?(w.appendChild(document.createElement("th")),w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",d+" vs. "+l))):(w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",l)),w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",d))),C=[C];var v,T=[];function x(e,t,n,a,d){return t<n?(e.appendChild(f("th",(t+1).toString())),e.appendChild(g("td",d,a[t].replace(/\t/g,"    "),a[t])),t+1):(e.appendChild(document.createElement("th")),e.appendChild(m("td","empty")),t)}function E(e,t,n,a,d,l,i,c,r){if(t<n){r&&0;for(var p="",h=0;h<c.length;h++){var o=c[h];switch(o[0]){case 0:p+=o[1];break;case 1:r||(p=p+'<span class="ins">'+o[1]+"</span>");break;case-1:r&&(p=p+'<span class="dell">'+o[1]+"</span>")}}return P=p,e.appendChild(f("th",(t+1).toString())),e.appendChild(function(e,t,n,a){a=a||"";var d=document.createElement(e);return d.className=t,d.dataset.text=a,d.innerHTML=n,d}("td",l,P,i)),t+1}return e.appendChild(document.createElement("th")),e.appendChild(m("td","empty")),t}function b(e,t,n,a,d){e.appendChild(f("th",null==t?"":(t+1).toString())),e.appendChild(f("th",null==n?"":(n+1).toString())),e.appendChild(g("td",d,a[null!=t?t:n].replace(/\t/g,"    ")))}for(var y=0;y<a.length;y++){code=a[y],change=code[0];for(var N=code[3],L=code[4],k=code[1],M=code[2],S=Math.max(L-N,M-k),B=[],H=[],I=0;I<S;I++){if(i&&1<a.length&&(0<y&&I==i||0==y&&0==I)&&"equal"==change){var O=S-(0==y?1:2)*i;if(1<O){if(B.push(w=document.createElement("tr")),N+=O,k+=O,I+=O-1,w.appendChild(f("th","...")),c||w.appendChild(g("td","skip","")),w.appendChild(f("th","...")),w.appendChild(g("td","skip","")),y+1==a.length)break;continue}}if(B.push(w=document.createElement("tr")),c)"insert"==change?b(w,null,k++,n,change):"replace"==change?(H.push(v=document.createElement("tr")),N<L&&b(w,N++,null,t,"delete"),k<M&&b(v,null,k++,n,"insert")):"delete"==change?b(w,N++,null,t,change):b(w,N++,k++,t,change);else{switch(change){case"insert":r++,w.classList.add("difference");break;case"replace":N<L&&k<M?h++:r++,w.classList.add("difference");break;case"delete":p++,w.classList.add("difference")}if("replace"==change)if(N<L&&k<M){var P=n[N].replace(/\t/g,"    ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q=t[k].replace(/\t/g,"    ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),z=diff(q,P,0);N=E(w,N,L,0,0,change,n[N],z,!1),k=E(w,k,M,0,0,change,t[k],z,!0)}else N=x(w,N,L,n,"insert"),k=x(w,k,M,t,change);else N=x(w,N,L,n,change),k=x(w,k,M,t,change)}}for(I=0;I<B.length;I++)T.push(B[I]);for(I=0;I<H.length;I++)T.push(H[I])}for(var y in o.innerHTML=r,u.innerHTML=h,s.innerHTML=p,0===r&&0===h&&0===p&&setTimeout(function(){ko.dialogs.alert("No changes found",null,"No changes found",null,"chrome,modal,titlebar,centerscreen,width=200,alwaysRaised"),window.parent.close()},0),C.push(w=document.createElement("tbody")),T)T.hasOwnProperty(y)&&w.appendChild(T[y]);for(var y in w=m("table","diff"+(c?" inlinediff":"")),C)C.hasOwnProperty(y)&&w.appendChild(C[y]);return w}};