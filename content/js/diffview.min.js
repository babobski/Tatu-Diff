diffview={buildView:function(e){var t=e.baseTextLines,n=e.newTextLines,a=e.opcodes,d=e.baseTextName?e.baseTextName:"Base Text",i=e.newTextName?e.newTextName:"New Text",l=e.contextSize,r=0==e.viewType||1==e.viewType?e.viewType:0,c=0,p=0,h=0,s=document.getElementById("insertCount"),o=document.getElementById("deletedCount"),u=document.getElementById("changedCount");if(null==t)throw"Cannot build diff view; baseTextLines is not defined.";if(null==n)throw"Cannot build diff view; newTextLines is not defined.";if(!a)throw"Canno build diff view; opcodes is not defined.";function m(e,t,n){n=n||!1;var a=document.createElement(e);return a.className=t,n&&(a.id=n),a}function f(e,t){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),n}function g(e,t,n,a){a=a||"";var d=document.createElement(e);return d.className=t,d.dataset.text=a,d.appendChild(document.createTextNode(n)),d}var C=document.createElement("thead"),w=document.createElement("tr");C.appendChild(w),r?(w.appendChild(document.createElement("th")),w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",d+" vs. "+i))):(w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",i)),w.appendChild(document.createElement("th")),w.appendChild(g("th","texttitle",d))),C=[C];var L,v=[];function T(e,t,n,a,d){return t<n?(e.appendChild(f("th",(t+1).toString())),e.appendChild(g("td",d,a[t].replace(/\t/g,"    "),a[t])),t+1):(e.appendChild(document.createElement("th")),e.appendChild(m("td","empty")),t)}function x(e,t,n,a,d,i,l,r,c){if(t<n){c&&0;for(var p="",h=0;h<r.length;h++){var s=r[h];switch(s[0]){case 0:p+=s[1];break;case 1:c||(p=p+'<span class="ins">'+s[1]+"</span>");break;case-1:c&&(p=p+'<span class="dell">'+s[1]+"</span>")}}return P=p,e.appendChild(f("th",(t+1).toString())),e.appendChild(function(e,t,n,a){a=a||"";var d=document.createElement(e);return d.className=t,d.dataset.text=a,d.innerHTML=n,d}("td",i,P,l)),t+1}return e.appendChild(document.createElement("th")),e.appendChild(m("td","empty")),t}function E(e,t,n,a,d){e.appendChild(f("th",null==t?"":(t+1).toString())),e.appendChild(f("th",null==n?"":(n+1).toString())),e.appendChild(g("td",d,a[null!=t?t:n].replace(/\t/g,"    ")))}for(var y=0;y<a.length;y++){code=a[y],change=code[0];for(var b=code[3],N=code[4],k=code[1],M=code[2],S=Math.max(N-b,M-k),B=[],H=[],I=0;I<S;I++){if(l&&1<a.length&&(0<y&&I==l||0==y&&0==I)&&"equal"==change){var O=S-(0==y?1:2)*l;if(1<O){if(B.push(w=document.createElement("tr")),b+=O,k+=O,I+=O-1,w.appendChild(f("th","...")),r||w.appendChild(g("td","skip","")),w.appendChild(f("th","...")),w.appendChild(g("td","skip","")),y+1==a.length)break;continue}}if(B.push(w=document.createElement("tr")),r)"insert"==change?E(w,null,k++,n,change):"replace"==change?(H.push(L=document.createElement("tr")),b<N&&E(w,b++,null,t,"delete"),k<M&&E(L,null,k++,n,"insert")):"delete"==change?E(w,b++,null,t,change):E(w,b++,k++,t,change);else{switch(change){case"insert":c++,w.classList.add("difference");break;case"replace":b<N&&k<M?h++:c++,w.classList.add("difference");break;case"delete":p++,w.classList.add("difference")}if("replace"==change)if(b<N&&k<M){var P=n[b].replace(/\t/g,"    ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),R=t[k].replace(/\t/g,"    ").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q=diff(R,P,0);b<N?leftLines.push(n[b]):leftLines.push("@empty@"),k<M?rightLines.push(t[k]):rightLines.push("@empty@"),b=x(w,b,N,0,0,change,n[b],q,!1),k=x(w,k,M,0,0,change,t[k],q,!0)}else b<N?leftLines.push(n[b]):leftLines.push("@empty@"),k<M?rightLines.push(t[k]):rightLines.push("@empty@"),b=T(w,b,N,n,"insert"),k=T(w,k,M,t,change);else b<N?leftLines.push(n[b]):leftLines.push("@empty@"),k<M?rightLines.push(t[k]):rightLines.push("@empty@"),b=T(w,b,N,n,change),k=T(w,k,M,t,change)}}for(I=0;I<B.length;I++)v.push(B[I]);for(I=0;I<H.length;I++)v.push(H[I])}for(var y in mergeResult=rightLines,s.innerHTML=c,u.innerHTML=h,o.innerHTML=p,0===c&&0===h&&0===p&&setTimeout(function(){ko.dialogs.alert("No changes found",null,"No changes found",null,"chrome,modal,titlebar,centerscreen,width=200,alwaysRaised"),window.parent.close()},0),C.push(w=document.createElement("tbody")),v)v.hasOwnProperty(y)&&w.appendChild(v[y]);for(var y in w=m("table","diff"+(r?" inlinediff":""),"diff"),C)C.hasOwnProperty(y)&&w.appendChild(C[y]);return w}};